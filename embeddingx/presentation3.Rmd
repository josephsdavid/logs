---
title: embeddingx project status
author: David Josephs
date: December 15
output:
  revealjs::revealjs_presentation:
    theme: simple
    self_contained: false
    reveal_plugins: ['notes', 'search', 'chalkboard']
---
# December 15 

## Plans for today

- run on test set
- write mimic dataloader (tonight)
- start retraining vision models (day)

## Test set observations

- some images do not load properly (corrupted maybe?) (TODO for Mars )
- To avoid this, see [this git issue](https://github.com/pytorch/pytorch/issues/1137)
- Just return None if exception happens and update collate fn

```python
def __getitem__(self, idx):
    try:
        img = cv2.imread(data[idx])
    except:
        return None
    return img

# ...

def collate_fn(batch):
    batch = list(filter(lambda x: x is not None, batch))
    return torch.utils.data.dataloader.default_collate(batch)
```


## Test Set Results

<style>.container{display: flex;}.col{flex: 1;}</style><div class='container'><div class='col'>

Task | Loss | Auroc | Auprc 
--- | --- | --- | --- 
**Atelectasis**|l1 | .617| .752
-|l2 | .818| .880
-|cosine | .808| .885



Task |Loss | Auroc | Auprc 
--- | --- | --- | --- 
**Cardiomegaly**|l1 | .367| .649
-|l2 | .830| .933
-|cosine | .706	| .853

</div><div class='col'>

Task |Loss | Auroc | Auprc 
--- | --- | --- | --- 
**Consolidation**|l1 | .733| .921
-|l2 | .462| .844
-|cosine | .731| .916


Task |Loss | Auroc | Auprc 
--- | --- | --- | --- 
**Edema**|l1 | .903| .937
-|l2 | .903| .941
-|cosine | .836| .886

cend

Task |Loss | Auroc | Auprc 
--- | --- | --- | --- 
**Pleural Eff.**|l1 | .885| .875
-|l2 | .886| .873
-|cosine | .854| .861


